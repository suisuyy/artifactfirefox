
function runAiArtifact() {

let fetch=cfetch;
    //aiartifact.bundle.js
function Y(){let e=document.querySelectorAll("code"),t={};return e.forEach(o=>{let n=o.textContent.trim(),r=j(n);r&&(t[r]=n)}),t}function j(e){let t=e.split(`
`)[0].trim();if(t){let o=t.match(/<!--\s*(.*?)\s*-->/)||t.match(/\/\/\s*(.*?)\s*$/)||t.match(/\/\*\s*(.*?)\s*\*\//);return console.log("First line:",t),console.log("Match result:",o),o?o[1]:null}else return console.log("First line is empty or whitespace."),null}function b(e=window.location.href){return e.replace(/[^a-zA-Z0-9]/g,"")}function x(){let e=Y();return{id:b(),...e}}function E(e,t){let o=0,n=0,r=0,l=0,s=!1,i,c=document.createElement("div");c.style.position="fixed",c.style.top="0",c.style.left="0",c.style.width="100%",c.style.height="100%",c.style.backgroundColor="rgba(0, 0, 0, 0.1)",c.style.zIndex="10000",c.style.display="none",document.body.appendChild(c),t.addEventListener("mousedown",a),t.addEventListener("touchstart",y);function a(d){d.preventDefault(),r=d.clientX,l=d.clientY,document.addEventListener("mouseup",u),document.addEventListener("mousemove",p),i=setTimeout(()=>{c.style.display="block"},500)}function y(d){d.preventDefault();let h=d.touches[0];r=h.clientX,l=h.clientY,document.addEventListener("touchend",u),document.addEventListener("touchmove",f),i=setTimeout(()=>{c.style.display="block"},500)}function p(d){d.preventDefault(),s=!0,o=r-d.clientX,n=l-d.clientY,r=d.clientX,l=d.clientY,e.style.top=`${e.offsetTop-n}px`,e.style.left=`${e.offsetLeft-o}px`}function f(d){d.preventDefault(),s=!0;let h=d.touches[0];o=r-h.clientX,n=l-h.clientY,r=h.clientX,l=h.clientY,e.style.top=`${e.offsetTop-n}px`,e.style.left=`${e.offsetLeft-o}px`}function u(){document.removeEventListener("mouseup",u),document.removeEventListener("mousemove",p),document.removeEventListener("touchend",u),document.removeEventListener("touchmove",f),clearTimeout(i),s?(s=!1,setTimeout(()=>{c.style.display="none"},0)):c.style.display="none"}}function m(e,t=!1){e.style.backgroundColor=t?"#ADD8E6":"transparent",e.style.color=t?"#000":"white",e.style.border=t?"1px solid #ADD8E6":"none",e.style.cursor="pointer",e.style.marginLeft="5px",e.style.padding="5px 10px",e.style.borderRadius="5px",e.style.fontSize="14px"}function S(e){e.style.cursor="pointer",e.style.padding="10px",e.style.border="none",e.style.backgroundColor="#f1f1f1",e.style.marginRight="5px",e.style.display="inline-block",e.style.borderBottom="2px solid transparent"}function k(e){fetch(`https://appstore.suisuy.workers.dev/${e}`).then(t=>t.json()).then(t=>{let o=document.querySelector("#tabs-container"),n=document.querySelector("#source-container");o.innerHTML="",n.innerHTML="";let r=0,l=document.createElement("button");l.textContent="Copy All Code",m(l,!0),l.addEventListener("click",P),n.appendChild(l),t.forEach((s,i)=>{let c=document.createElement("button");fetch(`https://appstore.suisuy.workers.dev/${e}/${s}`).then(a=>a.text()).then(a=>{let y=a.split(`
`).length;r+=y,c.textContent=`${s} (${y})`,l.textContent=`Copy All Code (${r} lines)`,S(c);let p=document.createElement("div");p.id=`file-content-${i}`,p.style.marginBottom="20px";let f=document.createElement("h3");f.textContent=s,p.appendChild(f);let u=document.createElement("pre");u.dataset.filename=s,p.appendChild(u),H(e,s,u),c.addEventListener("click",()=>{document.getElementById(`file-content-${i}`).scrollIntoView({behavior:"smooth"}),o.childNodes.forEach(d=>{d.style.borderBottom="2px solid transparent"}),c.style.borderBottom="2px solid #007BFF"}),o.appendChild(c),n.appendChild(p)}).catch(a=>{console.error(`Error fetching file content for ${s}:`,a)})}),o.firstChild&&o.firstChild.click()}).catch(t=>{console.error("Error fetching file list:",t)})}function H(e,t,o){fetch(`https://appstore.suisuy.workers.dev/${e}/${t}`).then(n=>n.text()).then(n=>{if(t.endsWith(".html"))o.textContent=n;else{let l=n.split(`
`).map((s,i)=>`<span class="line-number" contenteditable="false" style="display: inline-block; width: 30px; text-align: right; margin-right: 10px; color: #888; user-select: none;">${i+1}</span> ${s}`).join(`
`);o.innerHTML=l}}).catch(n=>{console.error(`Error fetching file content for ${t}:`,n)})}function P(){let t=document.querySelector("#source-container").querySelectorAll("pre"),o="";t.forEach(r=>{let l=r.dataset.filename;o+=`// ${l}
`,l.endsWith(".html")?o+=`${r.textContent}
`:(r.querySelectorAll(".line-number").forEach(s=>s.style.display="none"),o+=`${r.textContent}
`,r.querySelectorAll(".line-number").forEach(s=>s.style.display="inline-block"))});let n=document.createElement("textarea");n.value=o,document.body.appendChild(n),n.select();try{document.execCommand("copy"),console.log("All code copied to clipboard.")}catch(r){console.error("Error copying code to clipboard:",r)}document.body.removeChild(n)}function g(e,t){e.addEventListener("click",t),e.addEventListener("touchstart",o=>{o.preventDefault(),t(o)})}function w({container:e,topBar:t,urlInput:o,iframe:n,sourceContainer:r,tabsContainer:l}){let s=document.createElement("button");s.textContent="\u2716\uFE0F",m(s),g(s,()=>{e.style.display="none";let u=document.querySelector("#toggle-button");u.textContent="\u2728"});let i=document.createElement("button");i.textContent="\u{1F50D}",m(i);let c=!1;g(i,()=>{c?(e.style.width="400px",n.style.height="300px",i.textContent="\u{1F50D}"):(e.style.width="800px",n.style.height="600px",i.textContent="\u{1F50E}"),c=!c});let a=document.createElement("button");a.textContent="\u{1F517}",m(a),g(a,()=>{o.style.display==="none"?(o.style.display="block",a.textContent="\u{1F517}"):(o.style.display="none",a.textContent="\u{1F517}")});let y=document.createElement("button");y.textContent="\u{1F4DC}",m(y),g(y,()=>{if(l.style.display==="none"){l.style.display="block",r.style.display="block",n.style.display="none",y.textContent="\u{1F4DC}";let u=b();k(u)}else l.style.display="none",r.style.display="none",n.style.display="block",y.textContent="\u{1F4DC}"});let p=document.createElement("button");p.textContent="\u{1F504}",m(p),p.id="refresh-button",g(p,()=>{p.textContent="\u{1F504} Refreshing...";let u=x();fetch("https://appstore.suisuy.workers.dev/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then(()=>{C(u.id),p.textContent="\u{1F504}"}).catch(d=>{console.error("Error sending code data to server:",d),p.textContent="\u{1F504}"})});let f=document.createElement("button");f.textContent="\u2753",m(f),g(f,()=>{n.src="https://appstore.suisuy.workers.dev/httpschatgptcomca5968c9855df47dc949ae009b42c73f6/index.html",o.value=n.src}),t.appendChild(s),t.appendChild(i),t.appendChild(a),t.appendChild(y),t.appendChild(p),t.appendChild(f),e.appendChild(t)}function L(e){e.style.position="fixed",e.style.top="10px",e.style.right="10px",e.style.width="400px",e.style.border="1px solid #ccc",e.style.boxShadow="0px 0px 10px rgba(0, 0, 0, 0.5)",e.style.zIndex="1000",e.style.backgroundColor="white",e.style.borderRadius="5px",e.style.overflow="hidden"}function T(e){e.style.backgroundColor="#ADD8E6",e.style.padding="5px",e.style.cursor="move",e.style.textAlign="left",e.style.position="relative",e.style.color="white",e.style.display="flex",e.style.alignItems="center"}function D(e){e.width="100%",e.height="300px",e.style.border="none"}function A(e){e.style.padding="5px",e.style.margin="0",e.style.backgroundColor="#f9f9f9",e.style.borderTop="1px solid #ccc",e.style.width="100%"}function $(e){e.style.display="none",e.style.padding="5px",e.style.backgroundColor="#f1f1f1",e.style.borderTop="1px solid #ccc",e.style.overflowX="auto",e.style.whiteSpace="nowrap",e.style.position="sticky",e.style.top="0",e.style.zIndex="1001"}function B(e){e.style.display="none",e.style.padding="10px",e.style.backgroundColor="#f9f9f9",e.style.overflowY="auto",e.style.maxHeight="600px"}function q(e){e.style.marginBottom="10px",e.style.padding="10px",e.style.cursor="pointer",e.style.backgroundColor="#007BFF",e.style.color="white",e.style.border="none",e.style.borderRadius="5px"}function C(e){e=b();let t=document.querySelector("#iframe-container"),o=document.querySelector("#code-displayer"),n=document.querySelector("#url-input"),r=document.querySelector("#top-bar"),l=document.querySelector("#source-container"),s=document.querySelector("#tabs-container");if(!t){if(t=document.createElement("div"),t.id="iframe-container",L(t),r=document.createElement("div"),r.id="top-bar",T(r),o||(o=document.createElement("iframe"),o.id="code-displayer",D(o)),n||(n=document.createElement("input"),n.id="url-input",n.type="text",A(n),n.addEventListener("change",()=>{o.src=n.value})),s||(s=document.createElement("div"),s.id="tabs-container",$(s)),!l){l=document.createElement("div"),l.id="source-container",B(l);let i=document.createElement("button");i.textContent="Copy All Code",q(i),i.addEventListener("click",X),l.appendChild(i)}w({container:t,topBar:r,urlInput:n,iframe:o,sourceContainer:l,tabsContainer:s}),t.appendChild(r),t.appendChild(o),t.appendChild(n),t.appendChild(s),t.appendChild(l),document.body.appendChild(t),E(t,r)}fetch(`https://appstore.suisuy.workers.dev/${e}`).then(i=>i.json()).then(i=>{if(!Array.isArray(i)||i.length===0){console.error("No files found or error fetching files."),t.style.display="none";return}let c="";if(i.includes("index.html"))c=`https://appstore.suisuy.workers.dev/${e}/index.html`;else{let a=i.filter(y=>y.endsWith(".html"));if(a.length>0)c=`https://appstore.suisuy.workers.dev/${e}/${a[0]}`;else{console.error("No HTML files found for display."),t.style.display="none";return}}o.src='',o.src=c,n.value=c,t.style.display="block"}).catch(i=>{console.error("Error fetching files:",i),t.style.display="none"})}function X(){let t=document.querySelector("#source-container").querySelectorAll("pre"),o="";t.forEach(n=>{o+=n.textContent+`
`}),navigator.clipboard.writeText(o).then(()=>{console.log("All code copied to clipboard.")}).catch(n=>{console.error("Error copying code to clipboard:",n)})}var F=null;function J(){let e=document.querySelector("#iframe-container"),t=document.querySelector("#toggle-button"),o=x();e&&e.style.display==="block"?(e.style.display="none",t.textContent="\u2728"):JSON.stringify(F)===JSON.stringify(o)?(e.style.display="block",t.textContent="\u{1FA84}"):(F=o,fetch("https://appstore.suisuy.workers.dev/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(()=>{C(o.id),t.textContent="\u{1FA84}"}))}function M(){let e=document.createElement("button");e.id="toggle-button",e.textContent="\u2728",m(e),e.style.position="fixed",e.style.top="50%",e.style.right="10px",e.style.transform="translateY(-50%)",e.style.zIndex="1000",e.style.padding="10px",e.style.backgroundColor="#ffffff",e.style.color="#007BFF",e.style.border="2px solid #007BFF",e.style.borderRadius="50%",e.style.cursor="pointer",e.style.boxShadow="0px 0px 10px rgba(0, 0, 0, 0.1)",e.style.fontSize="24px",e.addEventListener("click",J),document.body.appendChild(e)}function O(){if(new URLSearchParams(window.location.search).get("debug")==="true"){let o=document.createElement("script");o.src="//cdn.jsdelivr.net/npm/eruda",o.onload=()=>eruda.init(),document.head.appendChild(o)}}var z=null,v=!1;function I(){if(v)return;let e=x();if(JSON.stringify(z)===JSON.stringify(e)){console.log("No changes detected in code data. Skipping refresh.");return}v=!0,z=e;let t=document.querySelector("#refresh-button");t&&(t.style.backgroundColor="black",t.style.color="white"),fetch("https://appstore.suisuy.workers.dev/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(()=>{C(e.id),t&&(t.style.backgroundColor="transparent",t.style.color="white"),v=!1}).catch(o=>{console.error("Error refreshing iframe:",o),t&&(t.style.backgroundColor="transparent",t.style.color="white"),v=!1})}var N;function R(){let e=document.documentElement,t={childList:!0,subtree:!0};new MutationObserver(n=>{for(let r of n)r.type==="childList"&&(console.log("DOM mutation detected: child node added or removed."),W())}).observe(e,t)}function W(){clearTimeout(N),N=setTimeout(()=>{I()},3e3)}function U(){new URLSearchParams(window.location.search).get("debug")==="true"||(console.log=function(){})}function V(){M(),O(),R(),U()}V();



}